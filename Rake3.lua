local v1 = Instance.new("ScreenGui",game.Players.LocalPlayer.PlayerGui)
local text = "https://discord.gg/XqMG3zYrRr"
setclipboard(text)
local Frame = Instance.new("Frame")
local TextLabel = Instance.new("TextLabel")
local TextLabel_2 = Instance.new("TextLabel")
local TextLabel_3 = Instance.new("TextLabel")
local TextButton = Instance.new("TextButton")
local TextLabel_4 = Instance.new("TextLabel")
local TextLabel_5 = Instance.new("TextLabel")

--Properties:

Frame.Parent = v1
Frame.AnchorPoint = Vector2.new(0.5, 0.5)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 0.200
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.499673396, 0, 0.499301672, 0)
Frame.Size = UDim2.new(0.5, 0, 0.5, 0)

TextLabel.Parent = Frame
TextLabel.AnchorPoint = Vector2.new(0.5, 0.5)
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1.000
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0.499673396, 0, 0.0872905031, 0)
TextLabel.Size = UDim2.new(0, 200, 0, 50)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Sapien V1"
TextLabel.TextColor3 = Color3.fromRGB(0, 4, 253)
TextLabel.TextScaled = true
TextLabel.TextSize = 14.000
TextLabel.TextWrapped = true

TextLabel_2.Parent = Frame
TextLabel_2.AnchorPoint = Vector2.new(0.5, 0.5)
TextLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_2.BackgroundTransparency = 1.000
TextLabel_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_2.BorderSizePixel = 0
TextLabel_2.Position = UDim2.new(0.163291961, 0, 0.394553035, 0)
TextLabel_2.Size = UDim2.new(0, 200, 0, 127)
TextLabel_2.Font = Enum.Font.SourceSans
TextLabel_2.Text = "Join our discord Server for more OP Scripts Link will copied into clipboard"
TextLabel_2.TextColor3 = Color3.fromRGB(0, 4, 253)
TextLabel_2.TextScaled = true
TextLabel_2.TextSize = 14.000
TextLabel_2.TextWrapped = true

TextLabel_3.Parent = Frame
TextLabel_3.AnchorPoint = Vector2.new(0.5, 0.5)
TextLabel_3.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_3.BackgroundTransparency = 1.000
TextLabel_3.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_3.BorderSizePixel = 0
TextLabel_3.Position = UDim2.new(0.836054862, 0, 0.394553035, 0)
TextLabel_3.Size = UDim2.new(0, 200, 0, 127)
TextLabel_3.Font = Enum.Font.SourceSans
TextLabel_3.Text = "CLICK RIGHTSHIFT TO UNLOCK YOUR MOUSE"
TextLabel_3.TextColor3 = Color3.fromRGB(0, 4, 253)
TextLabel_3.TextScaled = true
TextLabel_3.TextSize = 14.000
TextLabel_3.TextWrapped = true

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.fromRGB(0, 17, 255)
TextButton.BackgroundTransparency = 0.750
TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BorderSizePixel = 0
TextButton.Position = UDim2.new(0.400065303, 0, 0.338687152, 0)
TextButton.Size = UDim2.new(0.200000003, 0, 0.200000003, 0)
TextButton.Font = Enum.Font.SourceSans
TextButton.Text = "PLAY"
TextButton.TextColor3 = Color3.fromRGB(9, 1, 255)
TextButton.TextScaled = true
TextButton.TextSize = 14.000
TextButton.TextWrapped = true

TextLabel_4.Parent = Frame
TextLabel_4.AnchorPoint = Vector2.new(0.5, 0.5)
TextLabel_4.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_4.BackgroundTransparency = 1.000
TextLabel_4.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_4.BorderSizePixel = 0
TextLabel_4.Position = UDim2.new(0.498040468, 0, 0.587569833, 0)
TextLabel_4.Size = UDim2.new(0.100000001, 0, 0.100000001, 0)
TextLabel_4.Font = Enum.Font.SourceSans
TextLabel_4.Text = "CREDITS:"
TextLabel_4.TextColor3 = Color3.fromRGB(0, 25, 249)
TextLabel_4.TextSize = 14.000

TextLabel_5.Parent = Frame
TextLabel_5.AnchorPoint = Vector2.new(0.5, 0.5)
TextLabel_5.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_5.BackgroundTransparency = 1.000
TextLabel_5.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_5.BorderSizePixel = 0
TextLabel_5.Position = UDim2.new(0.499673337, 0, 0.736731827, 0)
TextLabel_5.Size = UDim2.new(0.300000012, 0, 0.400000006, 0)
TextLabel_5.Font = Enum.Font.SourceSans
TextLabel_5.Text = "URAVGSCRIPTER"
TextLabel_5.TextColor3 = Color3.fromRGB(0, 4, 254)
TextLabel_5.TextScaled = true
TextLabel_5.TextSize = 14.000
TextLabel_5.TextWrapped = true

local s1 = Instance.new("ScreenGui",game.Players.LocalPlayer.PlayerGui)
s1.Enabled = false
s1.ResetOnSpawn = false
-- Gui to Lua
-- Version: 3.2

-- Instances:

local Frame = Instance.new("Frame")
Frame.ZIndex = 2
local TextButton2 = Instance.new("TextButton")

--Properties:

Frame.Parent = s1
Frame.AnchorPoint = Vector2.new(0.5, 0.5)
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.BackgroundTransparency = 1.000
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.937295854, 0, 0.499301672, 0)
Frame.Size = UDim2.new(0.100000001, 0, 0.100000001, 0)

TextButton2.Parent = Frame
TextButton2.BackgroundColor3 = Color3.fromRGB(9, 1, 255)
TextButton2.BackgroundTransparency = 0.500
TextButton2.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton2.BorderSizePixel = 0
TextButton2.Position = UDim2.new(0.00816459768, 0, 0, 0)
TextButton2.Size = UDim2.new(0, 123, 0, 57)
TextButton2.Font = Enum.Font.SourceSans
TextButton2.Text = "SAPIEN V1"
TextButton2.TextColor3 = Color3.fromRGB(1, 1, 255)
TextButton2.TextScaled = true
TextButton2.TextSize = 14.000
TextButton2.TextWrapped = true



TextButton.MouseButton1Click:Connect(function()
	v1.Enabled = false
	s1.Enabled = true
end)

local w1 = Instance.new("ScreenGui",game.Players.LocalPlayer.PlayerGui)
--variables
local runservice = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local plr = game.Players.LocalPlayer
local plrgui = plr.PlayerGui
local sapien = Instance.new("ScreenGui",plrgui)
sapien.Enabled = false
local workspace = game.workspace
local rake = workspace:FindFirstChild("Rake")
sapien.ResetOnSpawn = false

local gui = false
local stunstick = false
local Fly = false
local RakeE = false
local ScrapE = false
local LootBoxE = false
local FlareE = false
local PlayersE = false
local AutoOpenDoorW = false
local FullBrightW = false
local NoFallDamageW = false
local autoopenlootW = false
 workspace.Filter.InvisibleWalls:Destroy()
 workspace.Filter.ServerInvisibleWalls:Destroy()

-- Functions

-- Function to highlight an object and display its name
function toggleHighlight(object, name, pp, color, state)
    if state then
        -- Enable ESP
        if not object:FindFirstChild("Highlight") then
            local highlight = Instance.new("Highlight")
            highlight.Parent = object
            highlight.FillColor = color or Color3.new(1, 1, 1) -- Default to white
            highlight.OutlineColor = Color3.new(1, 1, 1)
            highlight.Adornee = object
        end

        if not pp:FindFirstChild("BillboardGui") then
            local billboardGui = Instance.new("BillboardGui")
            billboardGui.Size = UDim2.new(2, 0, 2, 0) -- Bigger size
            billboardGui.StudsOffset = Vector3.new(0, 5, 0) -- Higher offset
            billboardGui.AlwaysOnTop = true
            billboardGui.Parent = pp -- Parent the BillboardGui to pp

            local textLabel = Instance.new("TextLabel")
            textLabel.Size = UDim2.new(4, 0, 4, 0)
            textLabel.BackgroundTransparency = 1
            textLabel.Text = name
            textLabel.TextColor3 = color or Color3.new(1, 1, 1)
            textLabel.Font = Enum.Font.SourceSansBold
            textLabel.TextScaled = true
            textLabel.Parent = billboardGui

            -- Make BillboardGui visible through walls
            textLabel.ZIndex = 10
            billboardGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        end
    else
        -- Disable ESP
        if object:FindFirstChild("Highlight") then
            object.Highlight:Destroy()
        end

        if pp:FindFirstChild("BillboardGui") then
            pp.BillboardGui:Destroy()
        end
    end
end

local function aura()
    if stunstick == true then  
        if game.Players.LocalPlayer.Character:FindFirstChild("StunStick") and rake ~= nil then  
	        local args = {
		    [1] = "S"
	        }
	
	        game.Players.LocalPlayer.Character.StunStick.Event:FireServer(unpack(args))
            task.wait()
	        local args = {
		    [1] = "H",
		    [2] = workspace.Rake:FindFirstChild("Head")
            }
	        game.Players.LocalPlayer.Character.StunStick.Event:FireServer(unpack(args))
        end
    end
end
coroutine.wrap(function()
	while true do
		aura()
		wait()
	end
end)()


local function scrapesp()
        if ScrapE == true then
            local scrapspawn = workspace.Filter.ScrapSpawns:GetChildren()
            for _, v in pairs(scrapspawn) do
                local children = v:GetChildren()
                if #children > 0 then
                    for _, checkin in pairs(children) do
                        if checkin:IsA("Model") and not checkin:FindFirstChild("Highlight") then
                            toggleHighlight(checkin, checkin.Name, checkin.Scrap, Color3.new(255, 255, 0), true)
                        end
                    end
                end
            end
        end
end 


UserInputService.InputBegan:Connect(function(keycode)
    if keycode.KeyCode == Enum.KeyCode.E then
       if AutoOpenDoorW == true then
			local args = {
        	[1] = "Door"
        	}
        	workspace.Map.SafeHouse.Door.RemoteEvent:FireServer(unpack(args))
    	end
	end
end)



local function boost()
   plr.Character.Humanoid.WalkSpeed = 30 
end 

local function nsd()
   game.ReplicatedStorage.FD_Event:Destroy()
end    

local function fullbr()
    if FullBrightW == true then
		game.Lighting.FogEnd = 9999999999
		game.Lighting.FogColor = Color3.fromRGB(79, 125, 166)
		game.Lighting.OutdoorAmbient = Color3.fromRGB(200, 200, 200)
		game.Lighting.Ambient = Color3.fromRGB(200, 200, 200)
		game.Lighting.FogColor = Color3.fromRGB(77, 119, 159)
		game.Lighting.BloodHourColor.TintColor = Color3.fromRGB(250, 250, 250)
		game.Lighting.BloodHourColor.Brightness = 0
		game.Lighting.BloodHourColor.Contrast = 0
		game.Lighting.BloodHourColor.Saturation = 0
	end 
end


local function autoopen()
    if autoopenlootW == true then
        if #workspace.Debris.SupplyCrates:GetChildren() >= 1 then
           for i,v in pairs(workspace.Debris.SupplyCrates:GetChildren()) do
               v.UnlockValue.Value = 100
            end   
        end
    end
end


coroutine.wrap(function()

	local UserInputService = game:GetService("UserInputService")
	local player = game.Players.LocalPlayer
	local camera = workspace.CurrentCamera

	-- Variable to track the mouse lock state
	local isMouseLocked = true

	-- Function to toggle mouse lock
	local function toggleMouseLock()
		isMouseLocked = not isMouseLocked
		if isMouseLocked then
			UserInputService.MouseBehavior = Enum.MouseBehavior.LockCenter
			camera.CameraType = Enum.CameraType.Custom
		else
			UserInputService.MouseBehavior = Enum.MouseBehavior.Default
			camera.CameraType = Enum.CameraType.Scriptable
		end
	end

	-- Listen for key press
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if gameProcessed then return end -- Ignore input if game is processing it

		if input.KeyCode == Enum.KeyCode.RightShift then
			task.spawn(toggleMouseLock)
		end
	end)

end)()

--watermark
local frameforwatermark = _G.Main.createmarkframe(w1)
local NoSlowDown = _G.Main.createwatermark(frameforwatermark,"NoSlowDown")
local NoFallDamage = _G.Main.createwatermark(frameforwatermark,"NoFallDamage")
local Remove = _G.Main.createwatermark(frameforwatermark,"RemoveBorderwalls")
--Combat
task.spawn(function()
runservice.RenderStepped:Connect(function()
boost()
end)
end)
nsd()


runservice.RenderStepped:Connect(function()
	fullbr()
	scrapesp()
	autoopen()
end)

local Combat = _G.Main.createFrame(sapien,UDim2.new(0.353, -49,0.345, 5),nil,"Combat","CombatFrame")

local stunbut = _G.Main.createButton(Combat,"StunStickAura",function()
    if stunstick == false then
		stunstick = true

	else stunstick = false
	end
end)

-- Services
local Players = game:GetService("Players")


-- Variables
local LocalPlayer = Players.LocalPlayer
local connection121

-- Helper function to check if a player is alive
local function IsAlive(player)
    return player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0
end

-- Anti-hit function
local function antiHit(character)
    if connection121 then
        connection121:Disconnect()
    end

    local rootPart = character:WaitForChild("HumanoidRootPart")

    connection121 = runservice.RenderStepped:Connect(function(deltaTime)
        local Rake = workspace:FindFirstChild("Rake")
        if Rake and Rake:FindFirstChild("HumanoidRootPart") and Fly == true then
            local rakeRootPart = Rake.HumanoidRootPart
            local distance = (rootPart.Position - rakeRootPart.Position).Magnitude
            if distance < 5 then
                local direction = (rootPart.Position - rakeRootPart.Position).Unit
                local newPosition = rakeRootPart.Position - direction * 8
                rootPart.CFrame = CFrame.new(newPosition)
                
                -- Update the camera to look behind the Rake
                local camera = Workspace.CurrentCamera
                camera.CFrame = CFrame.new(camera.CFrame.Position, rakeRootPart.Position)
                camera.CFrame = CFrame.new(rootPart.Position, rakeRootPart.Position)
            end
        end
    end)
end

-- Connect to CharacterAdded event
LocalPlayer.CharacterAdded:Connect(function(character)
    antiHit(character)
end)

-- Initialize for the current character
if LocalPlayer.Character then
    antiHit(LocalPlayer.Character)
end

-- Create the Fly button
local flybut = _G.Main.createButton(Combat, "AntiHit", function()
    Fly = not Fly
    print("Fly status changed to:", Fly) -- Debugging statement to check Fly status
end)

print("Script initialized") -- Debugging statement to check if script runs

--Visuals
local Visuals = _G.Main.createFrame(sapien,UDim2.new(0.557, -105,0.29, -3),nil,"Visuals","VisualsFrame")

-- Function to clean up highlights
-- Initialize necessary services and variables
local rake2

-- Function to clean up highlights
local function cleanUpHighlights()
    if rake2 and rake2:FindFirstChild("Highlight") then
        rake2.Highlight:Destroy()
    end
    if rake2 and rake2.Head:FindFirstChild("BillboardGui") then
        rake2.Head.BillboardGui:Destroy() -- Fixed typo: rake.Head to rake2.Head
    end
end

-- Function to highlight rake
local function highlightRake()
    if rake2 then
        toggleHighlight(rake2, "Rake", rake2.Head, Color3.new(1, 0, 0), true)
    end
end

-- Initial clean-up at the start of the script
cleanUpHighlights()

local connection = nil

local re = _G.Main.createButton(Visuals, "RakeEsp", function()
    if not RakeE then
        RakeE = true
        print("Rake ESP Enabled")
        connection = runservice.RenderStepped:Connect(function()
            highlightRake()
        end)
    else
        RakeE = false
        print("Rake ESP Disabled")
        if connection then
            connection:Disconnect()
            connection = nil
        end
        task.wait()
        cleanUpHighlights()
    end
end)

-- Check for existing Rake object in the workspace
for _, child in ipairs(workspace:GetChildren()) do
    if child.Name == "Rake" then
        rake2 = child
        if RakeE then
            highlightRake()
        end
        break
    end
end

-- Listen for the rake object being added to the workspace
workspace.ChildAdded:Connect(function(child)
    if child.Name == "Rake" then
        rake2 = child
        if RakeE then
            highlightRake()
        end
    end
end)

-- Listen for the rake object being removed from the workspace
workspace.ChildRemoved:Connect(function(child)
    if child.Name == "Rake" then
        cleanUpHighlights()
        rake2 = nil
    end
end)




local se = _G.Main.createButton(Visuals, "ScrapEsp", function()
    if ScrapE == false then
        ScrapE = true
    else 
        ScrapE = false
        task.wait()
        local scrapspawn = workspace.Filter.ScrapSpawns:GetChildren()
        for i, v in pairs(scrapspawn) do
            local children = v:GetChildren()
            if #children > 0 then
                for _, checkin in pairs(children) do
                    if checkin and checkin:IsA("Model") then
                        if checkin:FindFirstChild("Highlight") then
                            toggleHighlight(checkin, "hi", checkin.Scrap, Color3.new(1, 0, 0), false)
                        end
                    end
                end
            end
        end
    end
end)



local function updateLootBoxHighlights()
    if #workspace.Debris.SupplyCrates:GetChildren() >= 1 then
        for i, v in pairs(workspace.Debris.SupplyCrates:GetChildren()) do
            if v:FindFirstChild("lid") and v.lid:FindFirstChild("1") then
                local part1 = v.lid[1]
                if LootBoxE then
                    if not v:FindFirstChild("Highlight") then
                        toggleHighlight(v, "LootBox", part1, Color3.new(1, 1, 0), true)
                    end
                else
                    if v:FindFirstChild("Highlight") then
                        toggleHighlight(v, "LootBox", part1, Color3.new(1, 1, 0), false)
                    end
                end
            end
        end
    end
end
      local connection2
      local connection2 = runservice.RenderStepped:Connect(updateLootBoxHighlights)


-- Button to toggle the LootBoxE variable
local Le = _G.Main.createButton(Visuals, "LootBoxEsp", function()
    LootBoxE = not LootBoxE
    print("LootBox ESP Toggled: " .. tostring(LootBoxE))
end)



local function updateFlareGunHighlights()
    local flareGunPickUp = workspace:FindFirstChild("FlareGunPickUp")
    if flareGunPickUp then
        local flareGun = flareGunPickUp:FindFirstChild("FlareGun")
        if flareGun then
            if FlareE then
                if not flareGun:FindFirstChild("Highlight") then
                    toggleHighlight(flareGun, "Flaregun", flareGun, Color3.new(255, 255, 255), true)
                end
            else
                if flareGun:FindFirstChild("Highlight") then
                    toggleHighlight(flareGun, "Flaregun", flareGun, Color3.new(0, 255, 0), false)
                end
            end
        end
    end
end
local connection3
local Fe = _G.Main.createButton(Visuals, "FlareGunEsp", function()
    FlareE = not FlareE
    
    print("FlareGun ESP Toggled: " .. tostring(FlareE))

    if FlareE then
        connection3 = runservice.RenderStepped:Connect(updateFlareGunHighlights)
    else
        if connection then 
            connection3:Disconnect()
            connection3 = nil
        end
        updateFlareGunHighlights()
    end
end)



local function cleanUpPlayerHighlights()
    for _, player in pairs(game.Players:GetPlayers()) do
        local char = player.Character
        if char then 
            if char:FindFirstChild("Highlight") and player ~= game.Players.LocalPlayer then
                toggleHighlight(char, char.Name, char.Head, Color3.new(0, 0, 255), false)
            end
        end    
    end
end
local connection
local Pe = _G.Main.createButton(Visuals, "PlayersEsp", function()
    if not PlayersE then
        PlayersE = true
        print("Players ESP Enabled")
        connection = runservice.RenderStepped:Connect(function()
            for _, player in pairs(game.Players:GetPlayers()) do
                local char = player.Character
                if char and not char:FindFirstChild("Highlight") and player ~= game.Players.LocalPlayer then
                    toggleHighlight(char, char.Name, char.Head, Color3.new(0, 0, 255), true)
                end    
            end     
        end)
    else
        PlayersE = false
        print("Players ESP Disabled")
        if connection then
            connection:Disconnect()
            connection = nil
        end 
        cleanUpPlayerHighlights()
    end   
end)


--World

local World = _G.Main.createFrame(sapien,UDim2.new(0.663, 2,0.307, -2),nil,"World","WorldFrame")

local aod = _G.Main.createButton(World,"AutoOpenDoor(E)",function()
   if AutoOpenDoorW == false then
    AutoOpenDoorW = true
    else
        AutoOpenDoorW = false
    end
    end)


local fb = _G.Main.createButton(World,"FullBright",function()
	local f
    if FullBrightW == false then
        FullBrightW = true
        
    else
        FullBrightW = false
    end
end)

local aolb = _G.Main.createButton(World,"AutoOpenLootBox",function()
    if autoopenlootW == false then
        autoopenlootW = true
       
    else autoopenlootW = false
end
end)


TextButton2.MouseButton1Click:Connect(function()
	sapien.Enabled = not sapien.Enabled
end)


-- Gui to Lua
-- Version: 3.2

-- Instances:

local Frame = Instance.new("Frame")
local TextButton = Instance.new("TextButton")

--Properties:

Frame.Parent = game.StarterGui.ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.383246243, 89, 0.178770944, -6)
Frame.Size = UDim2.new(0.0867407024, 0, 0.0500000007, 0)

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.fromRGB(1, 255, 73)
TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BorderSizePixel = 0
TextButton.Position = UDim2.new(0.207078427, 0, 0, 0)
TextButton.Size = UDim2.new(0, 61, 0, 29)
TextButton.Font = Enum.Font.SourceSans
TextButton.Text = "OpenDoor"
TextButton.TextColor3 = Color3.fromRGB(6, 38, 249)
TextButton.TextScaled = true
TextButton.TextSize = 14.000
TextButton.TextWrapped = true



TextButton.MouseButton1Click:Connect(function()
	local args = {
    	[1] = "Door"
    	}

    workspace.Map.SafeHouse.Door.RemoteEvent:FireServer(unpack(args))
end)
